<section class="section">
  <div class="title">
    <h1>{{ "home.my_cart_item" | translate }}</h1>
  </div>
  <div
    class="flex justify-between text-purple-800 rounded-md shadow-md p-5 my-5"
  >
    <h3 class="text-2xl">
      {{ "home.total" | translate }}
      {{ cartItem.totalCartPrice | currency : "GBP" }}
    </h3>
    <button
      (click)="clearItem()"
      title="btn"
      class="bg-purple-700 border-0 rounded-lg text-white px-6 py-2 hover:bg-purple-800 transition-all duration-300 my-3"
    >
      <i class="fas fa-trash"></i> {{ "home.clear_cart" | translate }}
    </button>
  </div>
  @if (cartItem.totalCartPrice) { @for (cart of cartItem.products ; track
  cart.product._id) {

  <div class="items">
    <div
      class="flex items-center justify-between p-4 bg-white rounded-lg shadow-md border"
    >
      <img
        [src]="cart.product.imageCover"
        [alt]="cart.product.title"
        class="w-20 h-20 rounded-lg object-cover"
      />

      <div class="flex-1 ml-4">
        <h2 class="text-lg font-semibold text-gray-900">
          {{ cart.product.title.split("-", 2).join(" ") }}
        </h2>
        <div class="text-lg font-bold text-gray-900">
          {{ cart.price | currency }}
        </div>
      </div>
      <div class="flex items-center justify-evenly border rounded-lg mt-2 w-24">
        <button
          (click)="updateItem(cart.product._id, cart.count + 1)"
          title="btn"
          class="py-1 text-purple-900"
        >
          <i class="fas fa-plus"></i>
        </button>
        <span>{{ cart.count }}</span>
        <button
          (click)="updateItem(cart.product._id, cart.count - 1)"
          title="btn"
          class="py-1 text-purple-900"
        >
          <i class="fas fa-minus"></i>
        </button>
      </div>
      <button
        (click)="removeItem(cart.product._id)"
        title="btn"
        class="text-purple-600 hover:text-purple-800 mx-4"
      >
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>

  }
  <div class="flex justify-between my-5">
    <button [routerLink]="['/payment', cartItem._id]" title="btn" class="btn">
      {{ "home.checkout" | translate }}
    </button>
  </div>

  } @else {
  <div class="flex-col justify-center items-center">
    <div class="title">
      <h1>{{ "home.shopping_to_get_ur_cart" | translate }}</h1>
    </div>
    <div class="text-center w-[50%] mx-auto">
      <img class="w-full" src="/Img/nodatafound.avif" alt="notfound" />
    </div>
  </div>
  } @if(userId){
  <button [routerLink]="['/allorders']" title="btn" class="btn">
    {{ "home.my_order" | translate }}
  </button>
  }
</section>
